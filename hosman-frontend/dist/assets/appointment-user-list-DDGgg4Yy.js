import{ab as C,a as S,b as v,ap as y,r as s,ar as A,j as e,ac as D,x as w,B as k,T as a,as as I,a3 as h,m as F,at as W,n as E,p as M,H as N,C as O}from"./index-DKfJt2ga.js";import{S as T}from"./Snackbar-B-LkhC1v.js";function H(){var m;const{role:r}=C(),l=S(),x=v(),{data:n,loading:u}=y(t=>t.appointment.appointmentData);console.log("Fetched Appointments:",n);const[c,f]=s.useState("");s.useEffect(()=>{(!n||Array.isArray(n.appointments)&&n.appointments.length===0)&&l(A({}))},[l,(m=n==null?void 0:n.appointments)==null?void 0:m.length]);const d=Array.isArray(n==null?void 0:n.appointments)?n.appointments:[],g=d.reduce((t,i)=>(t[i.department]||(t[i.department]={department:i.department,count:0}),t[i.department].count+=1,t),{}),p=Object.values(g).filter(t=>t.department.toLowerCase().includes(c.toLowerCase())),b=t=>{x(`${M.dashboard.Appointment.department.replace(":id",t)}`)},[j,o]=s.useState(!1);return s.useEffect(()=>{(r==="Doctor"||r==="Nurse")&&o(!0)},[]),s.useEffect(()=>{const t=sessionStorage.getItem("welcomeMessageShown");r==="Manager"&&!t&&(o(!0),sessionStorage.setItem("welcomeMessageShown","true"))},[r]),e.jsxs(D,{children:[e.jsx(T,{open:j,autoHideDuration:2e3,onClose:()=>o(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:e.jsx(w,{onClose:()=>o(!1),severity:"success",variant:"filled",children:"🎉 Welcome to the Dashboard!"})}),u?e.jsx(k,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",width:"100%"},children:e.jsx(a,{variant:"h6",children:"Fetching appointments... ⏳"})}):e.jsxs(e.Fragment,{children:[e.jsxs(a,{variant:"h6",sx:{mb:2},children:["Total Appointments: ",d.length]}),e.jsx(I,{label:"Search Department",variant:"outlined",value:c,onChange:t=>f(t.target.value),sx:{mb:3,width:"100%","& .MuiOutlinedInput-root":{borderWidth:"2px","& fieldset":{borderColor:"grey",borderWidth:"2px"},"&:hover fieldset":{borderColor:"black"},"&.Mui-focused fieldset":{borderColor:"black",borderWidth:"2.5px"}}}}),e.jsx(h,{container:!0,spacing:3,children:p.length>0?p.map(t=>e.jsx(h,{item:!0,xs:6,sm:6,md:2,children:e.jsx(F,{sx:{width:"100%",minHeight:30,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",boxShadow:3,borderRadius:2,transition:"transform 0.2s ease-in",border:"2px solid",borderColor:"gainsboro","&:hover":{transform:"scale(1.11)",borderColor:"GrayText"}},children:e.jsxs(W,{sx:{padding:"8px",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(a,{variant:"h6",sx:{fontWeight:"bold"},children:t.department}),e.jsx(a,{variant:"body2",sx:{color:"gray"},children:t.count}),e.jsx(E,{variant:"contained",color:"primary",size:"small",sx:{mt:1},onClick:()=>b(t.department),children:"View"})]})})},t.department)):e.jsx(a,{sx:{mt:2,ml:3},children:"No appointments found."})})]})]})}const B={title:`All Staff | Staff | Settings - ${O.appName}`};function R(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsxs("title",{children:[" ",B.title]})}),e.jsx(H,{})]})}export{R as default};
