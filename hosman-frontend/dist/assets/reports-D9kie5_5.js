import{b as m,a as g,ap as j,r as u,aM as b,j as e,ac as f,T as r,a3 as d,m as C,at as T,n as w,a5 as A,a4 as R,a6 as v,a7 as y,a8 as c,a9 as a,aa as D,p as k,H as N,C as S}from"./index-DDXNwVzf.js";function W(){const p=m(),i=g(),n=j(s=>s.report.reportDetails.data||[]);u.useEffect(()=>{i(b({}))},[i]);const o=n.flatMap(s=>s.reports.filter(t=>t.isAssigned)).sort((s,t)=>new Date(t.updatedAt).getTime()-new Date(s.updatedAt).getTime()),l=n.map(s=>({...s,reports:s.reports.filter(t=>!t.isAssigned).sort((t,h)=>new Date(t.createdAt).getTime()-new Date(h.createdAt).getTime())})).filter(s=>s.reports.length>0),x=s=>{p(`${k.dashboard.Reports.details.replace(":id",s)}`)};return e.jsxs(f,{children:[e.jsxs(r,{variant:"h6",sx:{mb:2},children:["Total Reports:"," ",n.reduce((s,t)=>s+t.count,0)]}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"h6",sx:{mb:2},children:"Unassigned Reports"}),e.jsx(d,{container:!0,spacing:2,children:l.map((s,t)=>e.jsx(d,{item:!0,xs:6,sm:6,md:3,lg:2.7,children:e.jsxs(C,{sx:{textAlign:"center",height:120,display:"flex",flexDirection:"column",justifyContent:"space-between",p:1},children:[e.jsxs(T,{sx:{pb:0},children:[e.jsx(r,{variant:"subtitle2",sx:{fontWeight:"bold",fontSize:"0.875rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",textAlign:"center"},children:s._id}),e.jsxs(r,{variant:"body2",sx:{color:"gray",fontSize:"0.75rem"},children:[s.reports.length," Reports"]})]}),e.jsx(w,{variant:"contained",color:"primary",onClick:()=>x(s._id),sx:{fontSize:"0.75rem",py:.5,px:1.5,mt:1,width:"auto",display:"block",margin:"0 auto",border:"2px solid gainsboro",transition:"transform 0.2s ease-in","&:hover":{transform:"scale(1.02)",borderColor:"GrayText"}},children:"View"})]})},t))})]}),o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(r,{variant:"h6",sx:{mt:4,mb:2},children:"Assigned Reports"}),e.jsx(A,{component:R,children:e.jsxs(v,{children:[e.jsx(y,{children:e.jsxs(c,{children:[e.jsx(a,{children:"Description"}),e.jsx(a,{children:"Category"}),e.jsx(a,{children:"Room No"}),e.jsx(a,{children:"Assigned Worker"})]})}),e.jsx(D,{children:o.map((s,t)=>e.jsxs(c,{children:[e.jsx(a,{children:s.description}),e.jsx(a,{children:s.category}),e.jsx(a,{children:s.roomNo}),e.jsx(a,{children:e.jsx(r,{sx:{fontWeight:"bold",color:"green"},children:s.assignedWorker})})]},t))})]})})]})]})}const F={title:`Reports- ${S.appName}`};function E(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsxs("title",{children:[" ",F.title]})}),e.jsx(W,{})]})}export{E as default};
