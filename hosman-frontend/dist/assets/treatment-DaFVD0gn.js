import{ad as T,j as e,b as D,a as b,ap as x,r as C,aF as c,B as i,T as A,n as h,a3 as m,a5 as z,a4 as I,a6 as E,a7 as v,a8 as p,a9 as a,aa as S,e as j,aG as B,p as f,aH as H,aI as M,H as F,C as k}from"./index-DCDgsHTU.js";const G=T(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");function L(){const d=D(),n=b(),r=x(t=>t.allstaff.treatmentDetails.data)||[],l=x(t=>t.app.auth.role),u=t=>{if(console.log("Editing treatment with ID:",t),!Array.isArray(r)){console.log("treatmentData is not an array:",r);return}const s=r.find(o=>o._id===t);s?(console.log("Found treatment to edit:",s),d(f.dashboard.Treatment.edit,{state:s})):console.log("Treatment not found for ID:",t)},g=()=>{d(f.dashboard.Treatment.newTreatMents)};C.useEffect(()=>{n(c({treatment:"",department:"",specialization:"",price:0,treatmentId:""}))},[n]);const y=async t=>{if(window.confirm("Are you sure you want to delete this treatment?"))try{await n(H({treatmentID:t})),await n(c({}))}catch(o){console.error("Error deleting treatment:",o)}},w=async()=>{if(window.confirm("Are you sure you want to delete this treatment?"))try{await n(M()),await n(c(r))}catch(s){console.error("Error deleting treatment:",s)}};return e.jsxs(i,{sx:{p:3},children:[e.jsxs(i,{sx:{display:"flex",flexDirection:{xs:"row",sm:"row"},width:{xs:"85vw",lg:"auto"},justifyContent:"space-between",zIndex:1},children:[e.jsx(A,{variant:"h4",gutterBottom:!0,children:"Treatment List"}),l&&e.jsx(i,{sx:{display:"flex",gap:1.5,mr:{xs:0,lg:8},flexWrap:"wrap",mb:.2},children:l==="Manager"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{sx:{mb:2},variant:"contained",color:"info",size:"small",onClick:g,children:"Add"}),e.jsx(h,{sx:{mb:2},variant:"contained",color:"error",size:"small",onClick:w,children:"Delete all"})]})})]}),e.jsx(m,{container:!0,spacing:3,children:e.jsx(m,{item:!0,xs:12,children:e.jsx(z,{component:I,sx:{maxHeight:900,maxWidth:"auto"},children:e.jsxs(E,{size:"small",children:[e.jsx(v,{children:e.jsxs(p,{sx:{height:"50px"},children:[e.jsx(a,{sx:{py:.5},children:"ID"}),e.jsx(a,{sx:{py:.5},children:"Treatment"}),e.jsx(a,{sx:{py:.5},children:"Department"}),e.jsx(a,{sx:{py:.5},children:"Specialization"}),e.jsx(a,{sx:{py:.5},children:"Price"}),l=="Manager"&&e.jsx(a,{sx:{py:.5},children:"Actions"})]})}),e.jsx(S,{children:r.map((t,s)=>e.jsxs(p,{sx:{height:"10px"},children:[e.jsx(a,{sx:{py:{xs:.2,lg:1.3}},children:s+1}),e.jsx(a,{sx:{py:{xs:.2,lg:1.3}},children:t.treatment}),e.jsx(a,{sx:{py:{xs:.2,lg:1.3}},children:t.department}),e.jsx(a,{sx:{py:{xs:.2,lg:1.3}},children:t.specialization}),e.jsx(a,{sx:{py:{xs:.2,lg:1.3}},children:t.price}),l=="Manager"&&e.jsx(a,{sx:{py:{xs:.2,lg:1.3}},children:e.jsxs(i,{children:[e.jsx(j,{onClick:()=>u(t._id),color:"primary",children:e.jsx(B,{fontSize:"small"})}),e.jsx(j,{onClick:()=>y(t._id),color:"error",children:e.jsx(G,{fontSize:"small"})})]})})]},s))})]})})})})]})}function N(){return e.jsx(i,{children:e.jsx(L,{})})}const P={title:`All Staff | Staff | Settings - ${k.appName}`};function V(){return e.jsxs(e.Fragment,{children:[e.jsx(F,{children:e.jsxs("title",{children:[" ",P.title]})}),e.jsx(N,{})]})}export{V as default};
